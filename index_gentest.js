const fs = require('fs')
let configString = fs.readFileSync('./chart/config/Top Product Association.json', 'utf-8');
//console.log('***configString=' + configString);
const Freemarker = require('freemarker');
const freemarker = new Freemarker();
const results = {"items":[{"product id":32,"product name":"Chocolate Cookie","ppercent":0.0633487466536870284740812849841810659528},{"product id":33,"product name":"Cinnamon Raisin Bagel","ppercent":0.0552932587004137259673886590411292285228},{"product id":38,"product name":"BLT Sandwich","ppercent":0.0533706497931370163056704794353857386225},{"product id":2,"product name":"Caffè Mocha","ppercent":0.0398393769773667559016792406911657337552},{"product id":3,"product name":"Caffè Latte","ppercent":0.0394499878315891944512046726697493307374},{"product id":8,"product name":"Signature Chocolate","ppercent":0.0275979557069846678023850085178875638842},{"product id":6,"product name":"Espresso","ppercent":0.0272572402044293015332197614991482112436},{"product id":4,"product name":"Cappuccino","ppercent":0.0271842297395960087612557799951326356778},{"product id":10,"product name":"English Breakfast","ppercent":0.0268435142370406424920905329763932830372},{"product id":31,"product name":"Chicken Pie","ppercent":0.02679484059381844731078121197371623266},{"product id":25,"product name":"Iced Raspberry","ppercent":0.0267218301289851545388172304697006570942},{"product id":35,"product name":"Chocolate Marquise","ppercent":0.0265027987344852762229252859576539303967},{"product id":23,"product name":"Iced Mocha","ppercent":0.0264054514480408858603066439522998296422},{"product id":15,"product name":"Chai Tea Latte","ppercent":0.0262594305183743003163786809442686785106},{"product id":13,"product name":"Mint Citrus","ppercent":0.0260403991238744220004867364322219518131},{"product id":5,"product name":"Caramel Macchiato","ppercent":0.0259673886590411292285227549282063762473},{"product id":30,"product name":"Cheese Pocket","ppercent":0.0258943781942078364565587734241908006814},{"product id":11,"product name":"Hibiscus","ppercent":0.0258700413725967388659041129228522754928},{"product id":29,"product name":"Sausage Roll","ppercent":0.0257726940861523485032854709174981747384},{"product id":20,"product name":"Iced Coffee","ppercent":0.025358968118763689462156242394743246532},{"product id":34,"product name":"Blueberry Cheesecake","ppercent":0.0253102944755414942808469213920661961548},{"product id":21,"product name":"Iced Espresso","ppercent":0.0252129471890971039182282793867120954003},{"product id":19,"product name":"Iced Caramel","ppercent":0.0249939157945972256023363348746653687028},{"product id":16,"product name":"English Breakfast Tea Latte","ppercent":0.0248235580433195424677537113652956923826},{"product id":7,"product name":"Freshly Brewed Coffee","ppercent":0.0247018739352640545144804088586030664395},{"product id":36,"product name":"Lemon Tart","ppercent":0.0240934533949866147481138963251399367243},{"product id":37,"product name":"Blueberry Muffin","ppercent":0.0239961061085422243854952543197858359698},{"product id":12,"product name":"Mint Blend","ppercent":0.0238744220004867364322219518130932100268},{"product id":9,"product name":"Earl Grey","ppercent":0.0236797274275979557069846678023850085179},{"product id":28,"product name":"Cinnamon Danish","ppercent":0.0236067169627646629350206862983694329521},{"product id":14,"product name":"Chamomile","ppercent":0.0235337064979313701630567047943538573862},{"product id":17,"product name":"Matcha Latte","ppercent":0.0190313944998783158919445120467266974933},{"product id":26,"product name":"Blueberry Scone","ppercent":0.0159162813336578242881479678753954733512},{"product id":27,"product name":"Butter Croissant","ppercent":0.0150644925772694086152348503285470917498},{"product id":22,"product name":"Iced Java Chip","ppercent":0.0122170844487709905086395716719396446824},{"product id":18,"product name":"Hojicha Tea Latte","ppercent":0.0110975906546605013385251886103674860063},{"product id":24,"product name":"Iced Mango and Passion Fruit","ppercent":0.0110732538330494037478705281090289608177}],"first":{"$ref":"https://g83prasovuaqpmd-atpdemodb.adb.us-phoenix-1.oraclecloudapps.com/ords/atpdemo/adr/prodassoreport?query=1"}}

//freemarker.render('<h1>${title}</h1>', { title: 'test render' }, (err, result) => {
freemarker.render(configString, { items: results['items'] }, (err, result) => {
  if (err) {
    throw new Error(err);
  }
  console.log('**********result='+result);
    var reports = JSON.parse(result);
});